---
title: "Data Products and Interactivity with R"
author: "Nichole Monhait"
date: "`r Sys.Date()`"
output: ioslides_presentation
institute: RStudio, Inc.
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```
```{r packs, include = FALSE}
library(tidyverse)
library(flexdashboard)
library(plotly)
library(leaflet)
library(DT)
library(lubridate)

```

## 

![](https://colorado.rstudio.com/rstudio/s/f9afbf933dbd95036888f/files/erhs_535/slides_files/stats_languages.jpg){#id .class width=90% height=90%}

## What happens once analysis is done? 

Computational documents  
- documents with executable code inside of them  

Authors generate reports    
End users interact with reports    

## Considerations for end users

- can they interpret output?  
- do they know how to code?  
- do they have R/RStudio installed?  

## Considerations for developers  

- where is the data coming from?  
- do you need a live R session?  
- how often will this need to be changed?  

## Goal  

allow end users to interact with data products **without** involvement of the developer  

## Outline    

Computational Documents/ Reproducibility    
R Markdown    
Demo of Parameterized Rmd    
html widgets in R  
flexdashboard  

## R Markdown (Rmd)  

## Computational Documents in Rmd

**Rmd**     
Rmd with parameters    
Rmd report with html widgets  
Rmd with Shiny elements  
Shiny app    

## Computational Documents in Rmd

Rmd   
**Rmd with parameters**    
Rmd report with html widgets  
Rmd with Shiny elements  
Shiny app    
 
## DEMO  
 
## Example data   

Today you will use example data from NUFORC to analyze UFO sightings and product a data product.

There are 80,000 + sightings over the past 70 years within this dataset. 

## Example data  

https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-06-25

```{r data, message=FALSE, warning=FALSE, echo = TRUE}
ufo_sightings <- readr::read_csv(paste0("https://raw.githubusercontent.com/rfordatascience/tidytuesday",
                                       "/master/data/2019/2019-06-25/ufo_sightings.csv"))
```

```{r clean, include = FALSE}
ufo_sightings_us <- ufo_sightings %>% 
  mutate(date_time = mdy_hm(date_time),
         sighting_year = year(date_time)) 
  
```

## In-course task #1  

1. read in the data  
2. create a *new* dataframe with only observations in the United States 
3. convert date_time and date_documented variables to the correct class  
4. generate a parameterized Rmd using the `ufo_shape` variable

## Computational Documents in Rmd

Rmd   
Rmd with parameters    
**Rmd report with html widgets**    
Rmd with Shiny elements      
Shiny app   

## Interactive elements

html widgets  
- self-contained, interactive  

Shiny  
- GUI with live R session  
- do you need a live R session?  
- are you changing data more than once per session?  

## html widgets  

JavaScript libraries for R  
embed them in Rmd/Shiny  

- plotly  
- leaflet  
- DataTable  

## where to find html widgets  

https://www.htmlwidgets.org/

## In-course task #2  

1. install plotly, leaflet, DT  
2. create an interactive bar chart that of UFO shape counts (choose 3)  
3. create a leaflet map of encounter_length  
4. create an interactive data table 

## flexdashboard  

- group of visualizations  
- versatile components (static, plotly, leaflet)  

## install flexdashboard  

```{r install, eval = FALSE, echo = TRUE}
install.packages("flexdashboard")
```

## Structure of a dashboard  

https://rmarkdown.rstudio.com/flexdashboard/layouts.html


## Making data products meaningful  

- color (viridis)  
- information  
- size  
- text (scales) 
- highlighting  

## In-course task #3  

1. Use the UFO data already in your environmnent to recreate the following dashboard  
2. If you finish, alter the dashboard by rearranging plots, filtering to new data, etc.

## Helpful links for in-course task  

https://rmarkdown.rstudio.com/flexdashboard/  
https://www.htmlwidgets.org/index.html  
https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html  
https://rviews.rstudio.com/2019/09/19/intro-to-ggforce/ 
https://rstudio.com/resources/cheatsheets/  

## Final thoughts- create a portfolio!  

RStudio has made a variety of tools for you to showcase your skills using Rmd!  
- blogdown  
- bookdown  
- Rmd resume/CV  





